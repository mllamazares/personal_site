{%- assign total_words = 0 -%}
{%- for post in site.posts -%}
{%- assign post_words = post.content | number_of_words -%}
{%- assign total_words = total_words | plus: post_words -%}
{%- endfor -%}
{%- assign total_words_s = total_words | append: "" -%}
{%- assign size = total_words_s | size -%}
{%- if size > 3 -%}
{%- assign remainder = size | modulo: 3 -%}
{%- if remainder == 0 -%}{%- assign remainder = 3 -%}{%- endif -%}
{{ total_words_s | slice: 0, remainder }}
{%- assign rest = total_words_s | slice: remainder, size -%}
{%- assign chunks = rest | split: '' -%}
{%- for char in chunks -%}
{%- assign index = forloop.index | modulo: 3 -%}
{%- if index == 1 -%},{%- endif -%}
{{ char }}
{%- endfor -%}
{%- else -%}
{{ total_words }}
{%- endif -%}